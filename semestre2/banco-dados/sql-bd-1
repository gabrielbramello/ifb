CREATE SCHEMA INDUSTRIA;

CREATE TABLE IF NOT EXISTS INDUSTRIA.DEPARTAMENTO(
  CODIGO VARCHAR(2) NOT NULL PRIMARY KEY,
  NOME_DEPARTAMENTO VARCHAR(30) NOT NULL);

CREATE TABLE IF NOT EXISTS INDUSTRIA.FUNCIONARIO(
  CPF VARCHAR(14) NOT NULL PRIMARY KEY,
  COD_DEPARTAMENTO VARCHAR(2) NOT NULL,
  COD_CARGO VARCHAR(2) NOT NULL,
  NOME VARCHAR(30) NOT NULL);
  
CREATE TABLE IF NOT EXISTS INDUSTRIA.CARGOS(
  CODIGO VARCHAR(2) NOT NULL PRIMARY KEY,
  NOME_CARGO VARCHAR(30) NOT NULL,
  SALARIO FLOAT NOT NULL);
  
CREATE TABLE IF NOT EXISTS INDUSTRIA.COMPRAS(
  CODIGO_COMPRA VARCHAR(10) NOT NULL PRIMARY KEY,
  COD_DEPT VARCHAR(2) NOT NULL,
  CODIGO_INSUMO VARCHAR(10) NOT NULL,
  VALOR_TOTAL FLOAT NOT NULL);
  
CREATE TABLE IF NOT EXISTS INDUSTRIA.COMPRA_INSUMO(
  QUANTIDADE INTEGER NOT NULL,
  COD_COMPRA VARCHAR(10) NOT NULL,
  COD_INSUMO VARCHAR(10) NOT NULL);
  
CREATE TABLE IF NOT EXISTS INDUSTRIA.INSUMOS(
  CODIGO VARCHAR(10) NOT NULL PRIMARY KEY,
  COD_ESTOQUE VARCHAR(10) NOT NULL,
  CNPJ_FORNECEDOR VARCHAR(18) NOT NULL,
  PRECO_UNITARIO FLOAT NOT NULL);
  
CREATE TABLE IF NOT EXISTS INDUSTRIA.FORNECEDORES(
  CNPJ VARCHAR(18) NOT NULL PRIMARY KEY,
  NOME VARCHAR(30) NOT NULL,
  TELEFONE VARCHAR(9) NOT NULL,
  CIDADE VARCHAR(30) NOT NULL,
  RUA VARCHAR(30) NOT NULL,
  QUADRA VARCHAR(4));
  
CREATE TABLE IF NOT EXISTS INDUSTRIA.ESTOQUE(
  CODIGO VARCHAR(10) NOT NULL,
  COD_INSUMO VARCHAR(10),
  COD_PRODUTO VARCHAR(10),
  CONSTRAINT pk_CECICP PRIMARY KEY(CODIGO,COD_INSUMO,COD_PRODUTO));
  
  
  
CREATE TABLE IF NOT EXISTS INDUSTRIA.PRODUTOS(
  CODIGO VARCHAR(10) NOT NULL PRIMARY KEY,
  COD_ESTOQUE VARCHAR(10) NOT NULL,
  NOME VARCHAR(30) NOT NULL,
  PRECO_UNITARIO FLOAT NOT NULL);
  
CREATE TABLE IF NOT EXISTS INDUSTRIA.VENDAS(
  CODIGO VARCHAR(10) NOT NULL PRIMARY KEY,
  COD_DEPT VARCHAR(2) NOT NULL,
  NOME_PRODUTO VARCHAR(30) NOT NULL,
  VALOR_TOTAL FLOAT NOT NULL);
  
CREATE TABLE IF NOT EXISTS INDUSTRIA.VENDA_PRODUTOS(
  COD_VENDA VARCHAR(10) NOT NULL,
  QUANTIDADE INTEGER NOT NULL,
  COD_PRODUTO VARCHAR(10) NOT NULL);
  
CREATE TABLE IF NOT EXISTS INDUSTRIA.CLIENTES(
  CNPJ VARCHAR(18) NOT NULL PRIMARY KEY,
  NOME VARCHAR(30) NOT NULL,
  TELEFONE VARCHAR(9) NOT NULL,
  CIDADE VARCHAR(30) NOT NULL,
  RUA VARCHAR(30) NOT NULL,
  QUADRA VARCHAR(4));
  
CREATE TABLE IF NOT EXISTS INDUSTRIA.CLIENTE_PRODUTO(
  CNPJ_CLIENTE VARCHAR(18) NOT NULL,
  COD_PRODUTO VARCHAR(10) NOT NULL,
  QUANTIDADE INTEGER NOT NULL);
  
  
ALTER TABLE INDUSTRIA.FUNCIONARIO
ADD CONSTRAINT COD_DEP FOREIGN KEY (COD_DEPARTAMENTO) REFERENCES INDUSTRIA.DEPARTAMENTO(CODIGO);

ALTER TABLE INDUSTRIA.FUNCIONARIO
ADD CONSTRAINT CARGO_CODIGO FOREIGN KEY (COD_CARGO) REFERENCES INDUSTRIA.CARGOS(CODIGO);

ALTER TABLE INDUSTRIA.COMPRAS
ADD CONSTRAINT COD_DEP2 FOREIGN KEY (COD_DEPT) REFERENCES INDUSTRIA.DEPARTAMENTO(CODIGO);

ALTER TABLE INDUSTRIA.COMPRA_INSUMO
ADD CONSTRAINT COD_COM FOREIGN KEY (COD_COMPRA) REFERENCES INDUSTRIA.COMPRAS(CODIGO_COMPRA);

ALTER TABLE INDUSTRIA.COMPRA_INSUMO
ADD CONSTRAINT COD_INS FOREIGN KEY (COD_INSUMO) REFERENCES INDUSTRIA.INSUMOS(CODIGO);

ALTER TABLE INDUSTRIA.INSUMOS
ADD CONSTRAINT CNPJ_FORN FOREIGN KEY (CNPJ_FORNECEDOR) REFERENCES INDUSTRIA.FORNECEDORES(CNPJ);

ALTER TABLE INDUSTRIA.VENDAS
ADD CONSTRAINT COD_DEP3 FOREIGN KEY (COD_DEPT) REFERENCES INDUSTRIA.DEPARTAMENTO(CODIGO);

ALTER TABLE INDUSTRIA.VENDA_PRODUTOS
ADD CONSTRAINT COD_VEN FOREIGN KEY (COD_VENDA) REFERENCES INDUSTRIA.VENDAS(CODIGO);

ALTER TABLE INDUSTRIA.VENDA_PRODUTOS
ADD CONSTRAINT COD_PROD FOREIGN KEY (COD_PRODUTO) REFERENCES INDUSTRIA.PRODUTOS(CODIGO);

ALTER TABLE INDUSTRIA.CLIENTE_PRODUTO
ADD CONSTRAINT CNPJ_CLI FOREIGN KEY (CNPJ_CLIENTE) REFERENCES INDUSTRIA.CLIENTES(CNPJ);

ALTER TABLE INDUSTRIA.CLIENTE_PRODUTO
ADD CONSTRAINT COD_PROD2 FOREIGN KEY (COD_PRODUTO) REFERENCES INDUSTRIA.PRODUTOS(CODIGO);

ALTER TABLE INDUSTRIA.ESTOQUE
ADD CONSTRAINT COD_INS2 FOREIGN KEY (COD_INSUMO) REFERENCES INDUSTRIA.INSUMOS(CODIGO);

ALTER TABLE INDUSTRIA.ESTOQUE
ADD CONSTRAINT COD_PROD3 FOREIGN KEY (COD_PRODUTO) REFERENCES INDUSTRIA.PRODUTOS(CODIGO);

INSERT INTO INDUSTRIA.DEPARTAMENTO
VALUES ('1', 'COMPRAS'),('2','VENDAS');

INSERT INTO INDUSTRIA.CARGOS
VALUES ('1', 'GERENTE COMPRAS',2500.00), ('2', 'COMPRAS',2500.00),('3', 'GERENTE VENDAS',2500.00),('4', 'VENDEDOR',2500.00),('5', 'ESTOQUISTA',2500.00);

INSERT INTO INDUSTRIA.FUNCIONARIO
VALUES ('339.137.093-98', '1', '1','Daniel Pedro Henrique'),
	('415.488.328-39', '1', '2','Cauã Kauê Otávio Gonçalves'),
	('060.491.359-16', '1', '2','Levi Miguel Osvaldo de Paula'),
	('264.200.857-64', '1', '2','Gabriela Carla Carvalho'),
	('421.289.567-65', '1', '2','Luiza Regina Lopes'),
	('736.828.922-90', '2', '3','Benedita Luzia Figueiredo'),
	('748.448.080-01', '2', '4','Teresinha Maitê Teixeira'),
	('801.933.133-67', '2', '4','Marcos Benedito Barbosa'),
	('566.110.557-62', '2', '4','José Elias da Cruz'),
	('306.961.180-09', '2', '4','Roberto Raul Matheus Oliveira'),
	('180.952.151-39', '1', '5','Marcos Lorenzo Assis'),
	('611.950.426-55', '2', '5','Vera Betina Pires');

INSERT INTO INDUSTRIA.ESTOQUE
VALUES ('1','',''),('2','',''),('3','',''),('4','',''),('5','',''),('6','',''),('7','',''),('8','',''),('9','',''),('10','','');

INSERT INTO INDUSTRIA.INSUMOS
VALUES ('1', '','',), ('', '','',), ('', '','',), ('', '','',), 
	
INSERT INTO INDUSTRIA.COMPRAS
VALUES ('', '','',), ('', '','',), ('', '','',), ('', '','',);

DROP SCHEMA  
