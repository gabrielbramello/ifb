/*CRIA TABELA DEPARTAMENTO*/
CREATE TABLE IF NOT EXISTS INDUSTRIA.DEPARTAMENTO(
  COD_DEPT VARCHAR(2) NOT NULL PRIMARY KEY,
  NOME VARCHAR(30) NOT NULL);

/*CRIA A TABLE FUNCIONARIO*/
CREATE TABLE IF NOT EXISTS INDUSTRIA.FUNCIONARIO(
  CPF VARCHAR(14) NOT NULL PRIMARY KEY,
  COD_DEPT_FK VARCHAR(2) NOT NULL,
  COD_CARGO_FK VARCHAR(2) NOT NULL,
  NOME_FUNCIO VARCHAR(30) NOT NULL);

/*CRIA A TABLE CARGO*/
CREATE TABLE IF NOT EXISTS INDUSTRIA.CARGO(
  COD_CARGO VARCHAR(2) NOT NULL PRIMARY KEY,
  NOME_CARGO VARCHAR(30) NOT NULL,
  SALARIO FLOAT NOT NULL);

/*CRIA A TABELA COMPRA*/
CREATE TABLE IF NOT EXISTS INDUSTRIA.COMPRA(
  COD_COMPRA VARCHAR(6) NOT NULL PRIMARY KEY,
  COD_DEPT_FK VARCHAR(2) NOT NULL,
  VALOR_TOTAL FLOAT NOT NULL);

/*CRIA A TABELA COMPRA_TEM_INSUMO*/
CREATE TABLE IF NOT EXISTS INDUSTRIA.COMPRA_TEM_INSUMO(
  QUANTIDADE INTEGER NOT NULL,
  COD_COMPRA_FK VARCHAR(6) NOT NULL,
  COD_INSUMO_FK VARCHAR(6) NOT NULL);
  
/*CRIA A TABELA INSUMO*/  
CREATE TABLE IF NOT EXISTS INDUSTRIA.INSUMO(
  COD_INSUMO VARCHAR(6) NOT NULL PRIMARY KEY,
  COD_ESTOQUE_INSUMO_FK VARCHAR(6)NOT NULL,
  CNPJ_FORNEC_FK VARCHAR(18) NOT NULL,
  PRECO_UNITARIO FLOAT NOT NULL,
  NOME_INSUMO VARCHAR(30) NOT NULL);

/*CRIA A TABELA FORNECEDOR*/
CREATE TABLE IF NOT EXISTS INDUSTRIA.FORNECEDOR(
  CNPJ_FORNEC VARCHAR(18) NOT NULL PRIMARY KEY,
  NOME VARCHAR(30) NOT NULL,
  TELEFONE VARCHAR(9) NOT NULL,
  CIDADE VARCHAR(30) NOT NULL,
  RUA VARCHAR(30) NOT NULL,
  QUADRA VARCHAR(4));

/*CRIA A TABELA ESTOQUE_PRODUTO*/
CREATE TABLE IF NOT EXISTS INDUSTRIA.ESTOQUE_PRODUTO(
  COD_ESTOQUE_PRODUTO VARCHAR(6) NOT NULL PRIMARY KEY);

/*CRIA A TABELA ESTOQUE_INSUMO*/
CREATE TABLE IF NOT EXISTS INDUSTRIA.ESTOQUE_INSUMO(
  COD_ESTOQUE_INSUMO VARCHAR(6) NOT NULL PRIMARY KEY);

/*CRIA A TABELA PRODUTO*/
CREATE TABLE IF NOT EXISTS INDUSTRIA.PRODUTO(
  COD_PRODUTO VARCHAR(6) NOT NULL PRIMARY KEY,
  COD_ESTOQUE_PRODUTO_FK VARCHAR(6) NOT NULL,
  PRECO_UNITARIO FLOAT NOT NULL,
  NOME_PRODUTO VARCHAR(30) NOT NULL);

/*CRIA A TABELA VENDA*/
CREATE TABLE IF NOT EXISTS INDUSTRIA.VENDA(
  COD_VENDA VARCHAR(6) NOT NULL PRIMARY KEY,
  COD_DEPT_FK VARCHAR(2) NOT NULL,
  VALOR_TOTAL FLOAT NOT NULL);

/*CRIA A TABELA VENDA_TEM_PRODUTO */
CREATE TABLE IF NOT EXISTS INDUSTRIA.VENDA_TEM_PRODUTO(
  COD_VENDA_FK VARCHAR(6) NOT NULL,
  QUANTIDADE INTEGER NOT NULL,
  COD_PRODUTO_FK VARCHAR(6) NOT NULL);

/*CRIA A TABELA PRODUTO_TEM_CLIENTE*/
CREATE TABLE IF NOT EXISTS INDUSTRIA.PRODUTO_TEM_CLIENTE(
  CNPJ_CLIENTE_FK VARCHAR(18) NOT NULL,
  COD_PRODUTO_FK1 VARCHAR(6) NOT NULL);
  
/*CRIA A TABELA CLIENTE*/  
CREATE TABLE IF NOT EXISTS INDUSTRIA.CLIENTE(
  CNPJ_CLIENTE VARCHAR(18) NOT NULL PRIMARY KEY,  
  NOME VARCHAR(30) NOT NULL,
  TELEFONE VARCHAR(9) NOT NULL,
  CIDADE VARCHAR(30) NOT NULL,
  RUA VARCHAR(30) NOT NULL,
  QUADRA VARCHAR(4));

/*ALTERA A TABELA FUNCIONARIO E CRIA CHAVE ESTRANGEIRA REFERENCIANDO A TABELA DEPARTAMENTO*/
ALTER TABLE INDUSTRIA.FUNCIONARIO
ADD CONSTRAINT FK FOREIGN KEY (COD_DEPT_FK) REFERENCES INDUSTRIA.DEPARTAMENTO(COD_DEPT);

/*ALTERA A TABELA FUNCIONARIO E CRIA CHAVE ESTRANGEIRA REFERENCIANDO A TABELA CARGO*/
ALTER TABLE INDUSTRIA.FUNCIONARIO
ADD CONSTRAINT FK1 FOREIGN KEY (COD_CARGO_FK) REFERENCES INDUSTRIA.CARGO(COD_CARGO);

/*ALTERA A TABELA COMPRA E CRIA CHAVE ESTRANGEIRA REFERENCIANDO A TABELA DEPARTAMENTO*/
ALTER TABLE INDUSTRIA.COMPRA
ADD CONSTRAINT FK2 FOREIGN KEY (COD_DEPT_FK) REFERENCES INDUSTRIA.DEPARTAMENTO(COD_DEPT);

/*ALTERA A TABLE COMPRA_TEM_INSUMO E CRIA A CHAVE ESTRANGEIRA REFERENCIANDO A TABELA COMPRA*/
ALTER TABLE INDUSTRIA.COMPRA_TEM_INSUMO
ADD CONSTRAINT FK3 FOREIGN KEY (COD_COMPRA_FK) REFERENCES INDUSTRIA.COMPRA(COD_COMPRA);

/*ALTERA A TABELA COMPRA_TEM_INSUMO E CRIA CHAVE ESTRANGEIRA REFERENCIANDO A TABELA INSUMO */
ALTER TABLE INDUSTRIA.COMPRA_TEM_INSUMO
ADD CONSTRAINT FK4 FOREIGN KEY (COD_INSUMO_FK) REFERENCES INDUSTRIA.INSUMO(COD_INSUMO);

/*ALTERA A TABELA INSUMO E CRIA A CHAVE ENTRANGEIRA REFERENCIANDO FORNECEDOR*/
ALTER TABLE INDUSTRIA.INSUMO
ADD CONSTRAINT FK5 FOREIGN KEY (CNPJ_FORNEC_FK) REFERENCES INDUSTRIA.FORNECEDOR(CNPJ_FORNEC);

/*ALTERA A TABELA INSUMO E CRIA CHAVE ESTRANGEIRA REFERENCIANDO A TABELA ESTOQUE_INSUMO*/
ALTER TABLE INDUSTRIA.INSUMO
ADD CONSTRAINT FK6 FOREIGN KEY (COD_ESTOQUE_INSUMO_FK) REFERENCES INDUSTRIA.ESTOQUE_INSUMO(COD_ESTOQUE_INSUMO);

/*ALTERA A TABELA INSUMO E CRIA CHAVE ESTRANGEIRA REFERENCIANDO A TABELA ESTOQUE_PRODUTO*/
ALTER TABLE INDUSTRIA.PRODUTO
ADD CONSTRAINT FK7 FOREIGN KEY (COD_ESTOQUE_PRODUTO_FK) REFERENCES INDUSTRIA.ESTOQUE_PRODUTO(COD_ESTOQUE_PRODUTO);

/*ALTERA A TABLE VENDA E CRIA CHAVE ESTRANGEIRA REFERENCIANDO A TABELA DEPARTAMENTO*/
ALTER TABLE INDUSTRIA.VENDA
ADD CONSTRAINT FK8 FOREIGN KEY (COD_DEPT_FK) REFERENCES INDUSTRIA.DEPARTAMENTO(COD_DEPT);

/*ALTERA A TABELA VENDA_TEM_PRODUTO E CRIA CHAVE ESTRANGEIRA REFERENCIANDO A TABELA VENDA*/
ALTER TABLE INDUSTRIA.VENDA_TEM_PRODUTO
ADD CONSTRAINT FK9 FOREIGN KEY (COD_VENDA_FK) REFERENCES INDUSTRIA.VENDA(COD_VENDA);

/* ALTERA A TABELA VENDA_TEM_PRODUTO E CRIA CHAVE ESTRANGEIRA REFERENCIANDO A TABELA PRODUTO*/
ALTER TABLE INDUSTRIA.VENDA_TEM_PRODUTO
ADD CONSTRAINT FK10 FOREIGN KEY (COD_PRODUTO_FK) REFERENCES INDUSTRIA.PRODUTO(COD_PRODUTO);

/*ALTERA A TABELA PRODUTO_TEM_CLIENTE E CRIA CHAVE ESTRANGEIRA REFERENCIANDO A TABELA CLIENTE*/
ALTER TABLE INDUSTRIA.PRODUTO_TEM_CLIENTE
ADD CONSTRAINT FK11 FOREIGN KEY (CNPJ_CLIENTE_FK) REFERENCES INDUSTRIA.CLIENTE(CNPJ_CLIENTE);

/*ALTERA A TABELA PRODUTO_TEM_CLIENTE E CRIA CHAVE ESTRANGEIRA REFERENCIANDO A TABELA PRODUTO*/
ALTER TABLE INDUSTRIA.PRODUTO_TEM_CLIENTE
ADD CONSTRAINT FK12 FOREIGN KEY (COD_PRODUTO_FK1) REFERENCES INDUSTRIA.PRODUTO(COD_PRODUTO);

INSERT INTO INDUSTRIA.DEPARTAMENTO
VALUES ('1','COMPRAS'), ('2','VENDAS');

INSERT INTO INDUSTRIA.FUNCIONARIO
VALUES ('339.137.093-98','1','1','Daniel'),
	('415.488.328-39','1','2','Cauã '),
	('060.491.359-16','1','2','Levi'),
	('264.200.857-64','1','2','Gabriela'),
	('421.289.567-65','1','2','Luiza'),
	('736.828.922-90','2','3','Benedita'),
	('748.448.080-01','2','4','Terezinha'),
	('801.933.133-67','2','4','Marcos'),
	('566.110.557-62','2','4','José'),
	('306.961.180-09','2','4','Roberto'),
	('180.952.151-39','1','5','Marco'),
	('611.950.426-55','2','5','Vera');

	
INSERT INTO INDUSTRIA.CARGO
VALUES ('1','GERENTE COMPRAS',2500),
	('2','COMPRAS',2500),
	('3','GERENTE VENDAS',2500),
	('4','VENDEDOR',2500),
	('5','ESTOQUISTA',2500);

INSERT INTO INDUSTRIA.COMPRA
VALUES('1','1',350),
	('2','1',750),
	('3','1',110),
	('4','1',2220);

INSERT INTO INDUSTRIA.INSUMO
VALUES('1','100000','86.521.991/0001-73',0.35,'FERRO'),
	('2','200000','01.126.640/0001-05',0.75,'CARVÃO'),
	('3','300000','72.934.925/0001-10',0.11,'BAUXITA'),
	('4','400000','37.041.881/0001-07',2.22,'SODA CÁUSTICA');
	
INSERT INTO INDUSTRIA.FORNECEDOR
VALUES ('86.521.991/0001-73','FERRO MELLO LTDA','2222-2222','BRASILIA','AFONSO PENA','112'),
	('01.126.640/0001-05','CARVÃO BARRETO S.A.','3333-3333','BRASILIA','MARECHAL DEODORO','324'),
	('72.934.925/0001-10','BAUXITA FEDERAL S.A.','4444-4444','RIO DE JANEIRO','CASTELO BRANCO','214'),
	('37.041.881/0001-07','SODA KOL LTDA','5555-5555','GOIÂNIA','AVENIDA DO SOL','890');

INSERT INTO INDUSTRIA.ESTOQUE_INSUMO
VALUES('100000'),('200000'),('300000'),('400000');

	SELECT * FROM INDUSTRIA.FUNCIONARIO